<?php

namespace Kunstmaan\SeoBundle\Tests\Entity;

use Doctrine\ORM\EntityManager;
use Doctrine\ORM\EntityRepository;
use Kunstmaan\RedirectBundle\Entity\Redirect;
use Kunstmaan\SeoBundle\Entity\Seo;
use PHPUnit_Framework_TestCase;

/**
 * Generated by PHPUnit_SkeletonGenerator on 2012-09-18 at 12:21:52.
 */
class SeoTest extends PHPUnit_Framework_TestCase
{
    /**
     * @var Seo
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->object = new Seo();
    }

    public function testGetSetMetaAuthor()
    {
        $this->object->setMetaAuthor('Author Name');
        $this->assertEquals('Author Name', $this->object->getMetaAuthor());
    }

    public function testGetSetMetaDescription()
    {
        $this->object->setMetaDescription('Meta Description');
        $this->assertEquals('Meta Description', $this->object->getMetaDescription());
    }

    public function testGetSetMetaRobots()
    {
        $this->object->setMetaRobots('noindex, nofollow');
        $this->assertEquals('noindex, nofollow', $this->object->getMetaRobots());
    }

    public function testGetSetExtraMetadata()
    {
        $this->object->setExtraMetadata('Extra Metadata');
        $this->assertEquals('Extra Metadata', $this->object->getExtraMetadata());
    }

    public function testGetSetOgDescription()
    {
        $this->object->setOgDescription('OpenGraph description');
        $this->assertEquals('OpenGraph description', $this->object->getOgDescription());
    }

    public function testGetSetOgImageWithImage()
    {
        $media = $this->createMock('Kunstmaan\MediaBundle\Entity\Media');
        $this->object->setOgImage($media);
        $this->assertEquals($media, $this->object->getOgImage());
    }

    public function testGetSetOgImageWithNullValue()
    {
        $this->object->setOgImage(null);
        $this->assertEquals(null, $this->object->getOgImage());
    }

    public function testGetSetOgTitle()
    {
        $this->object->setOgTitle('OpenGraph title');
        $this->assertEquals('OpenGraph title', $this->object->getOgTitle());
    }

    public function testGetSetOgType()
    {
        $this->object->setOgType('website');
        $this->assertEquals('website', $this->object->getOgType());
    }

    public function testGetSetTwitterTitle()
    {
        $this->object->setTwitterTitle('twitter title');
        $this->assertEquals('twitter title', $this->object->getTwitterTitle());
    }

    public function testGetSetTwitterDescription()
    {
        $this->object->setTwitterDescription('twitter description');
        $this->assertEquals('twitter description', $this->object->getTwitterDescription());
    }

    public function testGetSetTwitterSite()
    {
        $this->object->setTwitterSite('@kunstmaan');
        $this->assertEquals('@kunstmaan', $this->object->getTwitterSite());
    }

    public function testGetSetTwitterCreator()
    {
        $this->object->setTwitterCreator('@denbatte');
        $this->assertEquals('@denbatte', $this->object->getTwitterCreator());
    }

    public function testGetSetTwitterImageWithImage()
    {
        $media = $this->createMock('Kunstmaan\MediaBundle\Entity\Media');
        $this->object->setTwitterImage($media);
        $this->assertEquals($media, $this->object->getTwitterImage());
    }

    public function testGetSetTwitterImageWithNullValue()
    {
        $this->object->setTwitterImage(null);
        $this->assertEquals(null, $this->object->getTwitterImage());
    }

    public function testGetDefaultAdminType()
    {
        $this->assertEquals('Kunstmaan\SeoBundle\Form\SeoType', $this->object->getDefaultAdminType());
    }

    public function testGettersSetters()
    {
        $this->object->setOgUrl('https://nasa.gov');
        $this->object->setMetaTitle('NASA');
        $this->object->setOgArticlePublisher('NASA PR dept');
        $this->object->setOgArticleSection('Mars');
        $this->object->setOgArticleAuthor('delboy1978uk');

        $this->assertEquals('https://nasa.gov', $this->object->getOgUrl());
        $this->assertEquals('NASA', $this->object->getMetaTitle());
        $this->assertEquals('NASA PR dept', $this->object->getOgArticlePublisher());
        $this->assertEquals('Mars', $this->object->getOgArticleSection());
        $this->assertEquals('delboy1978uk', $this->object->getOgArticleAuthor());
    }

    public function testGetSetRef()
    {
        $ref = new Redirect();
        $ref->setId(666);

        $this->object->setRef($ref);

        $em = $this->getMockBuilder(EntityManager::class)
            ->disableOriginalConstructor()
            ->getMock();

        $repo = $this->getMockBuilder(EntityRepository::class)
            ->disableOriginalConstructor()
            ->getMock();

        $repo->expects($this->any())
            ->method('find')
            ->will($this->returnValue($ref));

        $em->expects($this->any())
            ->method('getRepository')
            ->will($this->returnValue($repo));

        $this->assertInstanceOf(Redirect::class, $this->object->getRef($em));
        $this->assertEquals('666', $this->object->getRefId());
        $this->assertEquals(Redirect::class, $this->object->getRefEntityName());
    }
}
