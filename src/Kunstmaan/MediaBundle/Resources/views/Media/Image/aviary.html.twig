{% deprecated 'The "' ~ _self ~ '" template is deprecated since kunstmaanMediaBundle 5.7 and will be removed in kunstmaanMediaBundle 6.0. The aviary service is discontinued.' %}

<!-- Load widget code -->
<script src="https://dme0ih8comzn4.cloudfront.net/js/feather.js"></script>

<!-- Instantiate the widget -->
<script>
    var featherEditor = new Aviary.Feather({
        apiKey: '{{ handler.aviaryApiKey }}',
        apiVersion: 3,
        tools: 'all',
        onSave: function(imageID, newURL) {
            var img = document.getElementById(imageID);
            img.src = newURL;
            window.location = '{{ url('KunstmaanMediaBundle_aviary', { 'folderId' : folder.id, 'mediaId' : media.id }) }}?url='+newURL;
        }
    });

    function launchEditor(id, src) {
        featherEditor.launch({
            image: id,
            url: src
        });
        return false;
    }
</script>
