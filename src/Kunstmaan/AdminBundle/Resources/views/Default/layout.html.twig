{% set adminmenu = admin_menu_get() %}
{% set extraclasshtml %}{% block extraclasshtml %}{% endblock %}{% endset %}

<!DOCTYPE html>
<html class="no-js {{ extraclasshtml }}" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="robots" content="noindex, nofollow">

    <title>{% block title %}{{ websitetitle | trans }}{% endblock %}</title>

    <meta name="viewport" content="width=device-width,initial-scale=1">

    <link rel="shortcut icon" href="{{ asset('favicon.ico') }}">
    <link rel="apple-touch-icon" href="{{ asset('apple-touch-icon.png') }}">
    <link rel="apple-touch-icon" sizes="72x72" href="{{ asset('apple-touch-icon-72x72.png') }}">
    <link rel="apple-touch-icon" sizes="114x114" href="{{ asset('apple-touch-icon-114x114.png') }}">

    <!-- Styles -->
    {% include "KunstmaanAdminBundle:Default:_css_header.html.twig" %}

    <!-- JS -->
    {% include "KunstmaanAdminBundle:Default:_js_header.html.twig" %}
</head>
<body {% block extraparamsinbody %}{% endblock %}>
{% block body %}
    {% block top_menu %}
        <!--=========Top menu=========-->
        <header>
            <div class="navbar navbar-inverse navbar-fixed-top" data-dropdown="dropdown">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="brand" href="{{ path('KunstmaanAdminBundle_homepage') }}">{{ websitetitle | trans }}</a>
                        <nav>
                            <ul class="nav">
                                {% for menuitem in adminmenu.topchildren %}
                                {% set topchildren = menuitem.topchildren %}
                                {% if topchildren | length > 0 %}
                                <li class="dropdown {% if menuitem.active %} active {% endif %} {% if loop.first %} first {% endif %} {% if loop.last %} last {% endif %}">
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                        {{ menuitem.label | trans }}
                                        <b class="caret"></b>
                                    </a>
                                    <ul class="dropdown-menu">
                                        {% for topchild in topchildren %}
                                            {% set nestedtopchildren = topchild.topchildren %}
                                            {% if nestedtopchildren | length > 0 %}
                                                <li class="dropdown-submenu {% if topchild.active %} active {% endif %} {% if loop.first %} first {% endif %} {% if loop.last %} last {% endif %}">
                                                    <a tabindex="-1" href="#">{{ topchild.label | trans }}</a>
                                                    <ul class="dropdown-menu">
                                                        {% for nestedtopchild in nestedtopchildren %}
                                                            <li class="{% if nestedtopchild.active %} active {% endif %} {% if loop.first %} first {% endif %} {% if loop.last %} last {% endif %}">
                                                                <a href="{{ path(nestedtopchild.route, nestedtopchild.routeparams) }}">{{ nestedtopchild.label | trans }}</a>
                                                            </li>
                                                        {% endfor %}
                                                    </ul>
                                                </li>
                                            {% else %}
                                                {% if topchild.route %}
                                                    <li class="{% if topchild.active %} active {% endif %} {% if loop.first %} first {% endif %} {% if loop.last %} last {% endif %}">
                                                        <a href="{{ path(topchild.route, topchild.routeparams) }}">{{ topchild.label | trans }}</a>
                                                    </li>
                                                {% endif %}
                                            {% endif %}
                                        {% endfor %}
                                    </ul>
                                </li>
                                {% else %}
                                <li class="{% if menuitem.active %} active {% endif %} {% if loop.first %} first {% endif %} {% if loop.last %} last {% endif %}">
                                    <a href="{{ path(menuitem.route, menuitem.routeparams) }}">{{ menuitem.label | trans }}</a>
                                </li>
                                {% endif %}
                                {% endfor %}
                            </ul>
                            <ul class="nav pull-right">
                                {% set route = app.request.attributes.get('_route') %}
                                {% set attribs = app.request.attributes.all %}
                                {{ localeswitcher_widget(requiredlocales, route) }}
                                <li>
                                    <a href="{{ path('KunstmaanAdminBundle_user_change_password', { 'id':app.user.id }) }}">{{ 'layout.logged_in_as'|trans({'%username%':app.user.username}, 'FOSUserBundle') }}</a>
                                </li>
                                <li>
                                    <a href="{{ path('fos_user_security_logout') }}">{{ 'layout.logout'|trans({}, 'FOSUserBundle') }}</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </header>
    {% endblock %}

    <!--=========Main Content=========-->
    <div class="container-fluid">
        <!--Sidebar-->
        {% block sidebar %}
            {% include "KunstmaanAdminBundle:Default:sidebar.html.twig" %}
        {% endblock %}

        <!--Content_wrp-->
        <div id="main_content" class="content">
            <!--Breadcrumb-->
            {% block breadcrumb %}
            {% set breadcrumbitems = adminmenu.breadcrumb %}
            {% if breadcrumbitems | length > 0 %}
            <ul class="breadcrumb">
                {% for breadcrumbitem in breadcrumbitems %}
                {% if loop.last %}
                <li class="active">{{ breadcrumbitem.label | trans }}</li>
                {% else %}
                <li>
                   {% if  breadcrumbitem.route %}
                      <a href="{{ path(breadcrumbitem.route, breadcrumbitem.routeparams) }}">{{ breadcrumbitem.label | trans }}</a>
                   {% else %}
                      <span>{{ breadcrumbitem.label | trans }}</span>
                   {% endif %}
                </li>
                {% endif %}
                {% endfor %}
            </ul>
            {% endif %}
            {% endblock %}

            {% for flashMessageType, flashMessages in app.session.flashbag.all() %}
                {% for flashMessage in flashMessages %}
                    <div class="alert alert-{{ flashMessageType }}">
                        <button type="button" class="close" data-dismiss="alert">Ã—</button>
                        <strong>{{ flashMessageType | capitalize }}:</strong> {{ flashMessage }}
                    </div>
                 {% endfor %}
            {% endfor %}

            <!-- Messages -->
            {% block messages %}{% endblock %}

            <!--Content-header-->
            {% block header %}
            <div class="page-header">
                {% if adminmenu.current %}<h1>{{ adminmenu.current.label | trans }} {% block page_header_addition %}{% endblock %}</h1>{% endif %}
                {% block extra_actions_header %}{% endblock %}
            </div>
            {% endblock %}

            <!--Content-->
            {% block content %}{% endblock %}
        </div>
    </div>

    {% block footer %}
        <!--=========Footer=========-->
        <footer>
            <div class="container-fluid">
                <p class="pull-right">
                    <a target="_blank" href="http://www.kunstmaan.be" class="kunstmaan-logo">
                        <object data="{{ asset('bundles/kunstmaanadmin/img/general/kunstmaan_dark.svg') }}" type="image/svg+xml">
                            <img src="{{ asset('bundles/kunstmaanadmin/img/general/kunstmaan_dark.png') }}" alt="Kunstmaan" />
                        </object>
                    </a>
                </p>
            </div>
        </footer>
    {% endblock %}
{% endblock %}

    <!-- JS -->
    {% include "KunstmaanAdminBundle:Default:_js_footer.html.twig" %}

    <!-- JS - Extra -->
    {% block extrajavascript %}{% endblock %}
</body>
</html>
