!function(e,t,a){var n,o,i="ontouchstart"in t,u=i?"touchstart":"mousedown",l=i?"touchmove":"mousemove",d=i?"touchcancel":"mouseup";n=function(e){if(1/0!=e){var t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=Math.ceil(e%3600%60);return(0===t?"":t>0&&t.toString().length<2?"0"+t+":":t+":")+(a.toString().length<2?"0"+a:a)+":"+(n.toString().length<2?"0"+n:n)}return"--:--"},o=function(e){var t=a.createElement("audio"),n=!(!t.canPlayType||!t.canPlayType(e+";").replace(/no/,""));return n},e.fn.audioPlayer=function(){var t="audioplayer",a={},r={hideDefault:"__defaultplayer",playPause:"__playpause",playing:"--playing",time:"__time",timeCurrent:"__time--current",timeDuration:"__time--duration",bar:"__bar",barLoaded:"__bar--loaded",barPlayed:"__bar--played",volume:"__volume",volumeButton:"__volume__button",volumeAdjust:"__volume__adjust",noVolume:"--novolume",mute:"--muted",mini:"--mini"};for(var s in r)r.hasOwnProperty(s)&&(a[s]=t+r[s]);return this.each(function(){if("audio"!=e(this).prop("tagName").toLowerCase())return!1;var r,s,v=e(this),m=v.get(0).getAttribute("autoplay"),c=v.get(0).getAttribute("loop"),f=!1;if(m=""===m||"autoplay"===m?!0:!1,c=""===c||"loop"===c?!0:!1,v.find("source").each(function(){var t=e(this).attr("src"),a=e(this).attr("type");return"undefined"!=typeof t&&o(a)?(f=!0,!1):void 0}),f){r=e('<div class="'+t+'">'+e("<div>").append(v.eq(0).clone()).html()+'<button type="button" class="'+a.playPause+'"><i class="icon--play audioplayer__playpause__icon-play"></i><i class="icon--pause audioplayer__playpause__icon-pause"></i></button></div>'),s=r.find("audio"),s=s.get(0),r.find("audio").addClass(a.hideDefault),r.append('<div class="'+a.time+" "+a.timeCurrent+'"></div><div class="'+a.bar+'"><div class="'+a.barLoaded+'"></div><div class="'+a.barPlayed+'"></div></div><div class="'+a.time+" "+a.timeDuration+'"></div><div class="'+a.volume+'"><button type="button" class="'+a.volumeButton+'"><i class="icon--volume-medium audioplayer__volume__button__icon-volume-up"></i><i class="icon--volume-mute audioplayer__volume__button__icon-volume-off"></i></button><div class="'+a.volumeAdjust+'"><div class="audioplayer__volume__adjust__control"><div class="audioplayer__volume__adjust__control__state"></div></div></div></div>');var p,_,h,y=r.find("."+a.bar),b=r.find("."+a.barPlayed),g=r.find("."+a.barLoaded),C=r.find("."+a.timeCurrent),P=r.find("."+a.timeDuration),E=r.find("."+a.volumeButton),w=r.find("."+a.volumeAdjust+" > div"),L=0;p=function(e){theRealEvent=i?e.originalEvent.touches[0]:e,s.currentTime=Math.round(s.duration*(theRealEvent.pageX-y.offset().left)/y.width())},_=function(e){theRealEvent=i?e.originalEvent.touches[0]:e,s.volume=Math.abs((theRealEvent.pageY-(w.offset().top+w.height()))/w.height())},h=setInterval(function(){s.buffered.length>0&&(s.duration>0&&g.width(s.buffered.end(0)/s.duration*100+"%"),s.buffered.end(0)>=s.duration&&clearInterval(h))},100);var j=s.volume,M=s.volume=.111;Math.round(1e3*s.volume)/1e3==M?s.volume=j:r.addClass(a.noVolume),P.html("loading"),C.text(n(0)),s.addEventListener("loadedmetadata",function(){P.text(n(s.duration)),w.find("div").height(100*s.volume+"%"),L=s.volume}),s.addEventListener("timeupdate",function(){C.text(n(s.currentTime)),b.width(s.currentTime/s.duration*100+"%")}),s.addEventListener("volumechange",function(){w.find("div").height(100*s.volume+"%"),s.volume>0&&r.hasClass(a.mute)&&r.removeClass(a.mute),s.volume<=0&&!r.hasClass(a.mute)&&r.addClass(a.mute)}),s.addEventListener("ended",function(){r.removeClass(a.playing)}),y.on(u,function(e){p(e),y.on(l,function(e){p(e)})}).on(d,function(){y.unbind(l)}),E.on("click",function(){return r.hasClass(a.mute)?(r.removeClass(a.mute),s.volume=L):(r.addClass(a.mute),L=s.volume,s.volume=0),!1}),w.on(u,function(e){_(e),w.on(l,function(e){_(e)})}).on(d,function(){w.unbind(l)})}else r=e('<div class="'+t+'"><embed src="'+audioFile+'" width="0" height="0" volume="100" autostart="'+m.toString()+'" loop="'+c.toString()+'" /><button type="button" class="'+a.playPause+'"></button></div>'),s=r.find("embed"),s=s.get(0),r.addClass(a.mini);m&&r.addClass(a.playing),r.find("."+a.playPause).on("click",function(){return r.hasClass(a.playing)?(r.removeClass(a.playing),f?s.pause():s.Stop()):(r.addClass(a.playing),f?s.play():s.Play()),!1}),v.replaceWith(r)}),this}}(jQuery,window,document);