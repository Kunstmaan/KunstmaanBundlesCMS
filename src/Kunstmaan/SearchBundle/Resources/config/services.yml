parameters:
    kunstmaan_search.hostname: 'localhost'
    kunstmaan_search.port: 9200
    kunstmaan_search.search_provider: 'Elastica'
    kunstmaan_search.search.class: Kunstmaan\SearchBundle\Search\Search
    kunstmaan_search.search.factory.analysis.class: Kunstmaan\SearchBundle\Search\LanguageAnalysisFactory
    kunstmaan_search.search_provider_chain.class: Kunstmaan\SearchBundle\Provider\SearchProviderChain
    kunstmaan_search.search_provider.elastica.class: Kunstmaan\SearchBundle\Provider\ElasticaProvider
    kunstmaan_search.search_configuration_chain.class: Kunstmaan\SearchBundle\Configuration\SearchConfigurationChain
    # Default analysis factory provides language aware analyzers. if you need nGram analyzers you
    # can use the provided nGramAnalysisFactory by overriding the following parameter.
    #kunstmaan_search.search.factory.analysis.class: Kunstmaan\SearchBundle\Search\NGramAnalysisFactory
    # Ofcourse you can also provide your own implementation as long as it implements the
    # AnalysisFactoryInterface. More information can be found in the
    # documentation of this SearchBundle

services:
    Kunstmaan\SearchBundle\Search\Search:
        arguments:
            - '@Kunstmaan\SearchBundle\Provider\SearchProviderChain'
            - '%searchindexprefix%'
            - '%kunstmaan_search.search_provider%'

    Kunstmaan\SearchBundle\Search\LanguageAnalysisFactory: ~

    # Providers
    Kunstmaan\SearchBundle\Provider\SearchProviderChain: ~

    Kunstmaan\SearchBundle\Provider\ElasticaProvider:
        calls:
            - [ addNode, ['%kunstmaan_search.hostname%', '%kunstmaan_search.port%'] ]
        tags:
            - { name: kunstmaan_search.search_provider, alias: Elastica }

    # Configurations
    Kunstmaan\SearchBundle\Configuration\SearchConfigurationChain: ~

    Kunstmaan\SearchBundle\Command\SetupIndexCommand:
        calls:
            - [setContainer, ['@Symfony\Component\DependencyInjection\ContainerInterface'] ]
        tags:
            - { name: console.command }

    Kunstmaan\SearchBundle\Command\DeleteIndexCommand:
        calls:
            - [setContainer, ['@Symfony\Component\DependencyInjection\ContainerInterface'] ]
        tags:
            - { name: console.command }

    Kunstmaan\SearchBundle\Command\PopulateIndexCommand:
        calls:
            - [setContainer, ['@Symfony\Component\DependencyInjection\ContainerInterface'] ]
        tags:
            - { name: console.command }
